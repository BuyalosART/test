@import 'hover';

.lil-gui {
	.title {
		--title-height: calc(var(--widget-height) + var(--spacing) * 1.25);

		height: var(--title-height);
		line-height: calc(var(--title-height) - 4px);

		font-weight: 600;
		padding: 0 var(--padding);
		-webkit-tap-highlight-color: transparent;
		cursor: pointer;
		outline: none;

		&:before {
			font-family: 'lil-gui';
			content: '▾';
			padding-right: 2px;
			// transparent doesn't work?
			text-decoration: 1px var(--background-color) underline;
		}

		&:active {
			background: var(--title-background-color);
			opacity: 0.75;
		}

		@include can-hover {
			&:hover {
				background: var(--title-background-color);
				opacity: 0.85;
			}
			&:focus {
				text-decoration: 1px underline var(--focus-color);
			}
		}
	}

	&.root > .title:focus {
		text-decoration: none !important;
	}

	&.closed {
		> .title:before {
			content: '▸';
		}
		> .children {
			transform: translateY(-7px);
			opacity: 0;
		}
		&:not(.transition) > .children {
			display: none;
		}
	}

	&.transition > .children {
		transition-duration: 300ms;
		transition-property: height, opacity, transform;
		transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
		overflow: hidden;
		pointer-events: none;
	}

	// Empty children
	// -------------------------------------------------------------------------

	.children:empty:before {
		content: 'Empty';
		padding: 0 var(--padding);
		margin: var(--spacing) 0;
		display: block;
		height: var(--widget-height);
		font-style: italic;
		line-height: var(--widget-height);
		opacity: 0.5;
	}

	// Folders
	// -------------------------------------------------------------------------

	& & > .title {
		border-bottom: 1px solid var(--widget-color);
	}

	& &.transition > .title { 
		transition: border-color 300ms;
	}

	& &.closed > .title {
		border-color: var(--background-color);
	}

	& + .controller {
		border-top: 1px solid var(--widget-color);
		margin-top: 0;
		padding-top: var(--spacing);
	}

	&.root > & > .title {
		border-top: 1px solid var(--widget-color);
	}

	// Nested folders
	// -------------------------------------------------------------------------

	& & .controller {
		border: none;
	}

	& & & {
		> .title {
			border: none;
		}
		> .children {
			border: none;
			margin-left: var(--folder-indent);
			border-left: 2px solid var(--widget-color);
		}
	}
}
