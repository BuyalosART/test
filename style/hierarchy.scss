@import 'hover';

.lil-gui {
	.title {
		height: var(--title-height);
		font-weight: 600;
		padding: 0 var(--padding);
		-webkit-tap-highlight-color: transparent;
		cursor: pointer;
		outline: none;
		&:before {
			font-family: 'lil-gui';
			content: '▾';
			display: inline-block;
			padding: 0 2px 0 1px;
		}
		// @include can-hover { 
		// 	&:focus { 
		// 		text-decoration: underline dotted var(--focus-color);
		// 	}
		// }
		@include on-hover { 
			background: var(--title-background-color);
			opacity: 0.85;
		}
	}

	&.root > .title { 
		line-height: calc(var(--title-height) - 2px);
	}

	&.closed > {
		.title:before {
			content: '▸';
			text-decoration-color: transparent;
		}
		.children {
			transform: translateY(-7px);
			opacity: 0;
			&:not(.transition) {
				display: none;
			}
		}
	}

	.children.transition {
		transition-duration: 300ms;
		transition-property: height, opacity, transform;
		transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
		overflow: hidden;
		pointer-events: none;
	}

	// Empty children
	// -------------------------------------------------------------------------

	.children:empty:before {
		content: 'Empty';
		padding: 0 var(--padding);
		margin: var(--spacing) 0;
		display: block;
		height: var(--widget-height);
		font-style: italic;
		line-height: var(--widget-height);
		opacity: 0.5;
	}

	// Folders
	// -------------------------------------------------------------------------

	& > .title {
		line-height: calc(var(--title-height) - 4px);
	}

	& & > .title {
		border-bottom: 1px solid var(--widget-color);
		transition: border-color 300ms;
	}

	& &.closed > .title {
		border-color: var(--background-color);
	}

	& + .controller {
		border-top: 1px solid var(--widget-color);
		margin-top: 0;
		padding-top: var(--spacing);
	}

	& &:not(:first-child) > .title {
		border-top: 1px solid var(--widget-color);
	}

	// Nested folders
	// -------------------------------------------------------------------------

	& & .controller {
		border: none;
	}

	& & & {
		> .title {
			border: none;
		}
		> .children {
			border: none;
			margin-left: var(--folder-indent);
			border-left: 2px solid var(--widget-color);
		}
	}
}
